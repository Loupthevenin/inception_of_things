Script started on 2025-07-18 11:05:41+02:00 [TERM="xterm-256color" TTY="/dev/pts/0" COLUMNS="59" LINES="32"]
[?2004h]0;opdi-bia@opdi-bia-VirtualBox: ~/inception_of_things/p3[01;32mopdi-bia@opdi-bia-VirtualBox[00m:[01;34m~/inception_of_things/p3[00m$ cd s cripts/
[?2004l[?2004h]0;opdi-bia@opdi-bia-VirtualBox: ~/inception_of_things/p3/scripts[01;32mopdi-bia@opdi-bia-VirtualBox[00m:[01;34m~/inception_of_things/p3/scripts[00m$ ls
[?2004l[0m[01;32minstall.sh[0m
[?2004h]0;opdi-bia@opdi-bia-VirtualBox: ~/inception_of_things/p3/scripts[01;32mopdi-bia@opdi-bia-VirtualBox[00m:[01;34m~/inception_of_things/p3/scripts[00m$ cm[Khmod +x install.sh 
[?2004l[?2004h]0;opdi-bia@opdi-bia-VirtualBox: ~/inception_of_things/p3/scripts[01;32mopdi-bia@opdi-bia-VirtualBox[00m:[01;34m~/inception_of_things/p3/scripts[00m$ ./install.sh 
[?2004l[0;36mâžœ Installing required packages...[0m
[sudo] password for opdi-bia: 
[33m0% [Working][0m            Hit:1 https://apt.releases.hashicorp.com noble InRelease
[33m0% [Connecting to archive.ubuntu.com (91.189.91.83)] [Conn[0m[33m0% [Connecting to archive.ubuntu.com (91.189.91.83)] [Conn[0m                                                          Get:2 https://packages.microsoft.com/repos/code stable InRelease [3,590 B]
[33m0% [Waiting for headers] [Waiting for headers] [2 InReleas[0m[33m                                                          0% [Waiting for headers] [Waiting for headers][0m                                              Hit:3 http://security.ubuntu.com/ubuntu noble-security InRelease
[33m                                              0% [Waiting for headers][0m[33m0% [Waiting for headers][0m                        Hit:4 http://archive.ubuntu.com/ubuntu noble InRelease
[33m0% [Waiting for headers][0m[33m0% [Waiting for headers] [Waiting for headers][0m[33m0% [Waiting for headers] [Waiting for headers][0m                                              Get:5 https://packages.microsoft.com/repos/code stable/main arm64 Packages [20.6 kB]
[33m0% [Waiting for headers] [5 Packages 15.3 kB/20.6 kB 74%][0m[33m                                                         0% [Waiting for headers][0m[33m0% [5 Packages store 0 B] [Waiting for headers] [Waiting f[0m[33m                                                          0% [Waiting for headers] [Waiting for headers][0m                                              Get:6 https://packages.microsoft.com/repos/code stable/main amd64 Packages [20.5 kB]
[33m0% [Waiting for headers] [6 Packages 20.5 kB/20.5 kB 100%][0m[33m                                                          0% [Waiting for headers] [Waiting for headers][0m[33m0% [6 Packages store 0 B] [Waiting for headers] [Waiting f[0m[33m                                                          0% [Waiting for headers] [Waiting for headers][0m                                              Hit:7 http://archive.ubuntu.com/ubuntu noble-updates InRelease
[33m                                              0% [Waiting for headers][0m                        Get:8 https://packages.microsoft.com/repos/code stable/main armhf Packages [20.7 kB]
[33m0% [Waiting for headers] [8 Packages 15.3 kB/20.7 kB 74%][0m[33m                                                         0% [Waiting for headers][0m[33m0% [8 Packages store 0 B] [Waiting for headers][0m[33m                                               0% [Waiting for headers][0m[33m0% [Waiting for headers][0m                        Hit:9 http://archive.ubuntu.com/ubuntu noble-backports InRelease
[33m                        0% [Working][0m[33m100% [Working][0m              Fetched 65.5 kB in 0s (138 kB/s)
Reading package lists... 0%Reading package lists... 0%Reading package lists... 0%Reading package lists... 0%Reading package lists... 0%Reading package lists... 4%Reading package lists... 4%Reading package lists... 6%Reading package lists... 6%Reading package lists... 6%Reading package lists... 6%Reading package lists... 6%Reading package lists... 6%Reading package lists... 44%Reading package lists... 44%Reading package lists... 61%Reading package lists... 61%Reading package lists... 62%Reading package lists... 62%Reading package lists... 62%Reading package lists... 62%Reading package lists... 66%Reading package lists... 66%Reading package lists... 68%Reading package lists... 68%Reading package lists... 73%Reading package lists... 73%Reading package lists... 76%Reading package lists... 76%Reading package lists... 80%Reading package lists... 80%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 82%Reading package lists... 82%Reading package lists... 82%Reading package lists... 82%Reading package lists... 84%Reading package lists... 84%Reading package lists... 87%Reading package lists... 87%Reading package lists... 91%Reading package lists... 91%Reading package lists... 94%Reading package lists... 94%Reading package lists... 97%Reading package lists... 97%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 99%Reading package lists... 99%Reading package lists... Done
Building dependency tree... 0%Building dependency tree... 0%Building dependency tree... 0%Building dependency tree... 50%Building dependency tree... 50%Building dependency tree... Done
Reading state information... 0% Reading state information... 0%Reading state information... Done
149 packages can be upgraded. Run 'apt list --upgradable' to see them.
Reading package lists... 0%Reading package lists... 100%Reading package lists... Done
Building dependency tree... 0%Building dependency tree... 0%Building dependency tree... 50%Building dependency tree... 50%Building dependency tree... Done
Reading state information... 0% Reading state information... 0%Reading state information... Done
wget is already the newest version (1.21.4-1ubuntu4.1).
wget set to manually installed.
git is already the newest version (1:2.43.0-1ubuntu7.3).
ca-certificates is already the newest version (20240203).
ca-certificates set to manually installed.
The following NEW packages will be installed:
  curl
0 upgraded, 1 newly installed, 0 to remove and 149 not upgraded.
Need to get 226 kB of archives.
After this operation, 534 kB of additional disk space will be used.
[33m0% [Working][0m            Get:1 http://archive.ubuntu.com/ubuntu noble-updates/main amd64 curl amd64 8.5.0-2ubuntu10.6 [226 kB]
[33m1% [1 curl 2,628 B/226 kB 1%][0m[33m                             100% [Working][0m              Fetched 226 kB in 1s (407 kB/s)

7[0;31r8[1ASelecting previously unselected package curl.
(Reading database ... (Reading database ... 5%(Reading database ... 10%(Reading database ... 15%(Reading database ... 20%(Reading database ... 25%(Reading database ... 30%(Reading database ... 35%(Reading database ... 40%(Reading database ... 45%(Reading database ... 50%(Reading database ... 55%(Reading database ... 60%(Reading database ... 65%(Reading database ... 70%(Reading database ... 75%(Reading database ... 80%(Reading database ... 85%(Reading database ... 90%(Reading database ... 95%(Reading database ... 100%(Reading database ... 163769 files and directories currently installed.)
Preparing to unpack .../curl_8.5.0-2ubuntu10.6_amd64.deb ...
7[32;0f[42m[30mProgress: [  0%][49m[39m [.....................................] 87[32;0f[42m[30mProgress: [ 20%][49m[39m [#######..............................] 8Unpacking curl (8.5.0-2ubuntu10.6) ...
7[32;0f[42m[30mProgress: [ 40%][49m[39m [##############.......................] 8Setting up curl (8.5.0-2ubuntu10.6) ...
7[32;0f[42m[30mProgress: [ 60%][49m[39m [######################...............] 87[32;0f[42m[30mProgress: [ 80%][49m[39m [#############################........] 8Processing triggers for man-db (2.12.0-4build2) ...

7[0;32r8[1A[J[0;36mâžœ Installing Docker...[0m
# Executing docker install script, commit: 7040dd2bf115a359317b1de84de611aeabcb7bc2
+ sudo -E sh -c apt-get -qq update >/dev/null
+ sudo -E sh -c DEBIAN_FRONTEND=noninteractive apt-get -y -qq install ca-certificates curl >/dev/null
+ sudo -E sh -c install -m 0755 -d /etc/apt/keyrings
+ sudo -E sh -c curl -fsSL "https://download.docker.com/linux/ubuntu/gpg" -o /etc/apt/keyrings/docker.asc
+ sudo -E sh -c chmod a+r /etc/apt/keyrings/docker.asc
+ sudo -E sh -c echo "deb [arch=amd64 signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu noble stable" > /etc/apt/sources.list.d/docker.list
+ sudo -E sh -c apt-get -qq update >/dev/null
+ sudo -E sh -c DEBIAN_FRONTEND=noninteractive apt-get -y -qq install docker-ce docker-ce-cli containerd.io docker-compose-plugin docker-ce-rootless-extras docker-buildx-plugin docker-model-plugin >/dev/null
+ sudo -E sh -c docker version
Client: Docker Engine - Community
 Version:           28.3.2
 API version:       1.51
 Go version:        go1.24.5
 Git commit:        578ccf6
 Built:             Wed Jul  9 16:13:45 2025
 OS/Arch:           linux/amd64
 Context:           default

Server: Docker Engine - Community
 Engine:
  Version:          28.3.2
  API version:      1.51 (minimum version 1.24)
  Go version:       go1.24.5
  Git commit:       e77ff99
  Built:            Wed Jul  9 16:13:45 2025
  OS/Arch:          linux/amd64
  Experimental:     false
 containerd:
  Version:          1.7.27
  GitCommit:        05044ec0a9a75232cad458027ca83437aae3f4da
 runc:
  Version:          1.2.5
  GitCommit:        v1.2.5-0-g59923ef
 docker-init:
  Version:          0.19.0
  GitCommit:        de40ad0

================================================================================

To run Docker as a non-privileged user, consider setting up the
Docker daemon in rootless mode for your user:

    dockerd-rootless-setuptool.sh install

Visit https://docs.docker.com/go/rootless/ to learn about rootless mode.


To run the Docker daemon as a fully privileged service, but granting non-root
users access, refer to https://docs.docker.com/go/daemon-access/

WARNING: Access to the remote API on a privileged Docker daemon is equivalent
         to root access on the host. Refer to the 'Docker daemon attack surface'
         documentation for details: https://docs.docker.com/go/attack-surface/

================================================================================

[0;32mâœ” Docker installed successfully.[0m
[0;36mâžœ Installing kubectl...[0m
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100   138  100   138    0     0   1106      0 --:--:-- --:--:-- --:--:--  1112
  6 57.3M    6 4031k    0     0  21.9M      0  0:00:02 --:--:--  0:00:02 21.9M100 57.3M  100 57.3M    0     0  86.6M      0 --:--:-- --:--:-- --:--:--  110M
[0;32mâœ” kubectl installed.[0m
[0;36mâžœ Installing k3d[0m
Preparing to install k3d into /usr/local/bin
k3d installed into /usr/local/bin/k3d
Run 'k3d --help' to see what you can do with it.
[0;32mâœ” K3D installed.[0m
[31mFATA[0m[0000] runtime failed to list nodes: docker failed to get containers with labels 'map[app:k3d]': failed to list containers: permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Get "http://%2Fvar%2Frun%2Fdocker.sock/v1.46/containers/json?all=1&filters=%7B%22label%22%3A%7B%22app%3Dk3d%22%3Atrue%7D%7D": dial unix /var/run/docker.sock: connect: permission denied 
[0;36mâžœ Creating K3D cluster 'iot'...[0m
[31mERRO[0m[0000] Failed to get nodes for cluster 'iot': docker failed to get containers with labels 'map[k3d.cluster:iot]': failed to list containers: permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Get "http://%2Fvar%2Frun%2Fdocker.sock/v1.46/containers/json?all=1&filters=%7B%22label%22%3A%7B%22app%3Dk3d%22%3Atrue%2C%22k3d.cluster%3Diot%22%3Atrue%7D%7D": dial unix /var/run/docker.sock: connect: permission denied 
[36mINFO[0m[0000] Prep: Network                                
[31mERRO[0m[0000] Failed Cluster Preparation: Failed Network Preparation: failed to create cluster network: failed to check for duplicate docker networks: docker failed to list networks: permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Get "http://%2Fvar%2Frun%2Fdocker.sock/v1.46/networks?filters=%7B%22name%22%3A%7B%22%5E%2F%3Fk3d-iot%24%22%3Atrue%7D%7D": dial unix /var/run/docker.sock: connect: permission denied 
[31mERRO[0m[0000] Failed to create cluster >>> Rolling Back    
[36mINFO[0m[0000] Deleting cluster 'iot'                       
[31mERRO[0m[0000] Failed to get nodes for cluster 'iot': docker failed to get containers with labels 'map[k3d.cluster:iot]': failed to list containers: permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Get "http://%2Fvar%2Frun%2Fdocker.sock/v1.46/containers/json?all=1&filters=%7B%22label%22%3A%7B%22app%3Dk3d%22%3Atrue%2C%22k3d.cluster%3Diot%22%3Atrue%7D%7D": dial unix /var/run/docker.sock: connect: permission denied 
[31mERRO[0m[0000] failed to get cluster: No nodes found for given cluster 
[31mFATA[0m[0000] Cluster creation FAILED, also FAILED to rollback changes! 
[?2004h]0;opdi-bia@opdi-bia-VirtualBox: ~/inception_of_things/p3/scripts[01;32mopdi-bia@opdi-bia-VirtualBox[00m:[01;34m~/inception_of_things/p3/scripts[00m$ cd ..
[?2004l[?2004h]0;opdi-bia@opdi-bia-VirtualBox: ~/inception_of_things/p3[01;32mopdi-bia@opdi-bia-VirtualBox[00m:[01;34m~/inception_of_things/p3[00m$ cd . .
[?2004l[?2004h]0;opdi-bia@opdi-bia-VirtualBox: ~/inception_of_things[01;32mopdi-bia@opdi-bia-VirtualBox[00m:[01;34m~/inception_of_things[00m$ code .
[?2004l[?2004h]0;opdi-bia@opdi-bia-VirtualBox: ~/inception_of_things[01;32mopdi-bia@opdi-bia-VirtualBox[00m:[01;34m~/inception_of_things[00m$ cd p3
[?2004l[?2004h]0;opdi-bia@opdi-bia-VirtualBox: ~/inception_of_things/p3[01;32mopdi-bia@opdi-bia-VirtualBox[00m:[01;34m~/inception_of_things/p3[00m$ su
[?2004lPassword: 
su: Authentication failure
[?2004h]0;opdi-bia@opdi-bia-VirtualBox: ~/inception_of_things/p3[01;32mopdi-bia@opdi-bia-VirtualBox[00m:[01;34m~/inception_of_things/p3[00m$ cd s cripts/
[?2004l[?2004h]0;opdi-bia@opdi-bia-VirtualBox: ~/inception_of_things/p3/scripts[01;32mopdi-bia@opdi-bia-VirtualBox[00m:[01;34m~/inception_of_things/p3/scripts[00m$ su
[?2004lPassword: 
su: Authentication failure
[?2004h]0;opdi-bia@opdi-bia-VirtualBox: ~/inception_of_things/p3/scripts[01;32mopdi-bia@opdi-bia-VirtualBox[00m:[01;34m~/inception_of_things/p3/scripts[00m$ sudo su
[?2004l[?2004h]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# ./s[Kinstall.sh 
[?2004l[0;36mâžœ Installing required packages...[0m
[33m0% [Working][0m            Hit:1 https://download.docker.com/linux/ubuntu noble InRelease
[33m0% [Waiting for headers] [Connecting to archive.ubuntu.com[0m                                                          Hit:2 https://apt.releases.hashicorp.com noble InRelease
[33m0% [Connecting to archive.ubuntu.com (185.125.190.81)] [Co[0m                                                          Hit:3 http://archive.ubuntu.com/ubuntu noble InRelease
[33m                                                          0% [Waiting for headers] [Waiting for headers][0m                                              Hit:4 http://security.ubuntu.com/ubuntu noble-security InRelease
[33m0% [Waiting for headers] [Waiting for headers][0m                                              Hit:5 http://archive.ubuntu.com/ubuntu noble-updates InRelease
[33m                                              0% [Waiting for headers][0m[33m0% [Waiting for headers] [Waiting for headers][0m                                              Hit:6 https://packages.microsoft.com/repos/code stable InRelease
[33m                                              0% [Waiting for headers][0m                        Hit:7 http://archive.ubuntu.com/ubuntu noble-backports InRelease
[33m                        0% [Working][0m[33m0% [Working][0m[33m0% [Working][0m[33m0% [Working][0m[33m0% [Working][0m[33m0% [Working][0m[33m20% [Working][0m             Reading package lists... 0%Reading package lists... 0%Reading package lists... 0%Reading package lists... 0%Reading package lists... 0%Reading package lists... 0%Reading package lists... 0%Reading package lists... 4%Reading package lists... 4%Reading package lists... 6%Reading package lists... 6%Reading package lists... 6%Reading package lists... 6%Reading package lists... 6%Reading package lists... 6%Reading package lists... 44%Reading package lists... 44%Reading package lists... 61%Reading package lists... 61%Reading package lists... 62%Reading package lists... 62%Reading package lists... 62%Reading package lists... 62%Reading package lists... 66%Reading package lists... 66%Reading package lists... 68%Reading package lists... 68%Reading package lists... 73%Reading package lists... 73%Reading package lists... 76%Reading package lists... 76%Reading package lists... 80%Reading package lists... 80%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 82%Reading package lists... 82%Reading package lists... 82%Reading package lists... 82%Reading package lists... 85%Reading package lists... 85%Reading package lists... 87%Reading package lists... 87%Reading package lists... 91%Reading package lists... 91%Reading package lists... 94%Reading package lists... 94%Reading package lists... 97%Reading package lists... 97%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 99%Reading package lists... 99%Reading package lists... Done
Building dependency tree... 0%Building dependency tree... 0%Building dependency tree... 0%Building dependency tree... 50%Building dependency tree... 50%Building dependency tree... Done
Reading state information... 0% Reading state information... 0%Reading state information... Done
149 packages can be upgraded. Run 'apt list --upgradable' to see them.
Reading package lists... 0%Reading package lists... 100%Reading package lists... Done
Building dependency tree... 0%Building dependency tree... 0%Building dependency tree... 50%Building dependency tree... 50%Building dependency tree... Done
Reading state information... 0% Reading state information... 0%Reading state information... Done
curl is already the newest version (8.5.0-2ubuntu10.6).
wget is already the newest version (1.21.4-1ubuntu4.1).
git is already the newest version (1:2.43.0-1ubuntu7.3).
ca-certificates is already the newest version (20240203).
0 upgraded, 0 newly installed, 0 to remove and 149 not upgraded.
[0;36mâžœ Installing Docker...[0m
[0;32mâœ” Docker is already installed.[0m
[0;36mâžœ Installing kubectl...[0m
[0;32mâœ” kubectl is already installed.[0m
[0;36mâžœ Installing k3d[0m
[0;32mâœ” k3d is already installed.[0m
[0;36mâžœ Creating K3D cluster 'iot'...[0m
[36mINFO[0m[0000] Prep: Network                                
[36mINFO[0m[0000] Created network 'k3d-iot'                    
[36mINFO[0m[0000] Created image volume k3d-iot-images          
[36mINFO[0m[0000] Starting new tools node...                   
[36mINFO[0m[0000] Pulling image 'ghcr.io/k3d-io/k3d-tools:5.8.3' 
[36mINFO[0m[0001] Creating node 'k3d-iot-server-0'             
[36mINFO[0m[0002] Pulling image 'docker.io/rancher/k3s:v1.31.5-k3s1' 
[36mINFO[0m[0009] Starting node 'k3d-iot-tools'                
[36mINFO[0m[0009] Creating LoadBalancer 'k3d-iot-serverlb'     
[36mINFO[0m[0010] Pulling image 'ghcr.io/k3d-io/k3d-proxy:5.8.3' 
[36mINFO[0m[0017] Using the k3d-tools node to gather environment information 
[36mINFO[0m[0017] HostIP: using network gateway 172.18.0.1 address 
[36mINFO[0m[0017] Starting cluster 'iot'                       
[36mINFO[0m[0017] Starting servers...                          
[36mINFO[0m[0017] Starting node 'k3d-iot-server-0'             
[36mINFO[0m[0021] All agents already running.                  
[36mINFO[0m[0021] Starting helpers...                          
[36mINFO[0m[0021] Starting node 'k3d-iot-serverlb'             
[36mINFO[0m[0028] Injecting records for hostAliases (incl. host.k3d.internal) and for 2 network members into CoreDNS configmap... 
[36mINFO[0m[0030] Cluster 'iot' created successfully!          
[36mINFO[0m[0030] You can now use it like this:                
kubectl cluster-info
[0;32mâœ” Cluster 'iot' created.[0m
[0;36mâžœ Waiting for K3D nodes to be ready...[0m
node/k3d-iot-server-0 condition met
[0;32mâœ” K3D nodes are ready.[0m
[0;36mâžœ Installing Argo CD in 'argocd' namespace...[0m
namespace/argocd created
namespace/dev created
customresourcedefinition.apiextensions.k8s.io/applications.argoproj.io created
customresourcedefinition.apiextensions.k8s.io/applicationsets.argoproj.io created
customresourcedefinition.apiextensions.k8s.io/appprojects.argoproj.io created
serviceaccount/argocd-application-controller created
serviceaccount/argocd-applicationset-controller created
serviceaccount/argocd-dex-server created
serviceaccount/argocd-notifications-controller created
serviceaccount/argocd-redis created
serviceaccount/argocd-repo-server created
serviceaccount/argocd-server created
role.rbac.authorization.k8s.io/argocd-application-controller created
role.rbac.authorization.k8s.io/argocd-applicationset-controller created
role.rbac.authorization.k8s.io/argocd-dex-server created
role.rbac.authorization.k8s.io/argocd-notifications-controller created
role.rbac.authorization.k8s.io/argocd-redis created
role.rbac.authorization.k8s.io/argocd-server created
clusterrole.rbac.authorization.k8s.io/argocd-application-controller created
clusterrole.rbac.authorization.k8s.io/argocd-applicationset-controller created
clusterrole.rbac.authorization.k8s.io/argocd-server created
rolebinding.rbac.authorization.k8s.io/argocd-application-controller created
rolebinding.rbac.authorization.k8s.io/argocd-applicationset-controller created
rolebinding.rbac.authorization.k8s.io/argocd-dex-server created
rolebinding.rbac.authorization.k8s.io/argocd-notifications-controller created
rolebinding.rbac.authorization.k8s.io/argocd-redis created
rolebinding.rbac.authorization.k8s.io/argocd-server created
clusterrolebinding.rbac.authorization.k8s.io/argocd-application-controller created
clusterrolebinding.rbac.authorization.k8s.io/argocd-applicationset-controller created
clusterrolebinding.rbac.authorization.k8s.io/argocd-server created
configmap/argocd-cm created
configmap/argocd-cmd-params-cm created
configmap/argocd-gpg-keys-cm created
configmap/argocd-notifications-cm created
configmap/argocd-rbac-cm created
configmap/argocd-ssh-known-hosts-cm created
configmap/argocd-tls-certs-cm created
secret/argocd-notifications-secret created
secret/argocd-secret created
service/argocd-applicationset-controller created
service/argocd-dex-server created
service/argocd-metrics created
service/argocd-notifications-controller-metrics created
service/argocd-redis created
service/argocd-repo-server created
service/argocd-server created
service/argocd-server-metrics created
deployment.apps/argocd-applicationset-controller created
deployment.apps/argocd-dex-server created
deployment.apps/argocd-notifications-controller created
deployment.apps/argocd-redis created
deployment.apps/argocd-repo-server created
deployment.apps/argocd-server created
statefulset.apps/argocd-application-controller created
networkpolicy.networking.k8s.io/argocd-application-controller-network-policy created
networkpolicy.networking.k8s.io/argocd-applicationset-controller-network-policy created
networkpolicy.networking.k8s.io/argocd-dex-server-network-policy created
networkpolicy.networking.k8s.io/argocd-notifications-controller-network-policy created
networkpolicy.networking.k8s.io/argocd-redis-network-policy created
networkpolicy.networking.k8s.io/argocd-repo-server-network-policy created
networkpolicy.networking.k8s.io/argocd-server-network-policy created
[0;32mâœ” Argo CD deployed in 'argocd' namespace.[0m
[0;36mâžœ Waiting for Argo CD server to be available...[0m
deployment.apps/argocd-server condition met
[0;32mâœ” Argo CD is ready.[0m
[0;36mâžœ Starting port-forward on Argo CD UI (localhost:8080)...[0m
[0;36mâžœ Applying Argo CD Application manifest...[0m
application.argoproj.io/iot created
[0;32mâœ” Application resource created. Argo CD should start syncing.[0m
[0;36mâžœ You can now access Argo CD UI at: http://localhost:8080...[0m
[1;33mDefault login: admin
Password: alhnZ0cq3WLQpYoS[0m
[0;36mâžœ Waiting for wil-playground Pod to be Ready...[0m
error: no matching resources found
[0;31mâœ˜ Timeout: wil-playground Pod is not Ready.[0m
No resources found in dev namespace.
[?2004h]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# ^C[?2004l[?2004h[?2004l
[?2004h]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# ./install.sh 
[?2004l[0;36mâžœ Installing required packages...[0m
[33m0% [Working][0m            Hit:1 https://download.docker.com/linux/ubuntu noble InRelease
[33m0% [Connected to apt.releases.hashicorp.com (99.86.91.49)][0m                                                          Get:2 https://apt.releases.hashicorp.com noble InRelease [12.9 kB]
[33m0% [Waiting for headers] [Waiting for headers] [Waiting fo[0m                                                          Hit:3 http://security.ubuntu.com/ubuntu noble-security InRelease
[33m                                                          0% [Waiting for headers] [Waiting for headers][0m                                              Hit:4 https://packages.microsoft.com/repos/code stable InRelease
[33m                                              0% [Waiting for headers][0m                        Hit:5 http://archive.ubuntu.com/ubuntu noble InRelease
[33m                        0% [Working][0m            Hit:6 http://archive.ubuntu.com/ubuntu noble-updates InRelease
[33m0% [Working][0m            Hit:7 http://archive.ubuntu.com/ubuntu noble-backports InRelease
[33m0% [Working][0m[33m0% [Working][0m[33m0% [Working][0m[33m0% [Working][0m[33m0% [Working][0m[33m0% [Working][0m[33m0% [Working][0m[33m0% [Working][0m[33m100% [Working][0m              Fetched 12.9 kB in 2s (8,538 B/s)
Reading package lists... 0%Reading package lists... 0%Reading package lists... 0%Reading package lists... 0%Reading package lists... 0%Reading package lists... 0%Reading package lists... 0%Reading package lists... 4%Reading package lists... 4%Reading package lists... 6%Reading package lists... 6%Reading package lists... 6%Reading package lists... 6%Reading package lists... 6%Reading package lists... 6%Reading package lists... 44%Reading package lists... 44%Reading package lists... 61%Reading package lists... 61%Reading package lists... 62%Reading package lists... 62%Reading package lists... 62%Reading package lists... 62%Reading package lists... 66%Reading package lists... 66%Reading package lists... 68%Reading package lists... 68%Reading package lists... 73%Reading package lists... 73%Reading package lists... 76%Reading package lists... 76%Reading package lists... 80%Reading package lists... 80%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 82%Reading package lists... 82%Reading package lists... 82%Reading package lists... 82%Reading package lists... 85%Reading package lists... 85%Reading package lists... 87%Reading package lists... 87%Reading package lists... 91%Reading package lists... 91%Reading package lists... 94%Reading package lists... 94%Reading package lists... 97%Reading package lists... 97%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 99%Reading package lists... 99%Reading package lists... 99%Reading package lists... Done
Building dependency tree... 0%Building dependency tree... 0%Building dependency tree... 0%Building dependency tree... 50%Building dependency tree... 50%Building dependency tree... Done
Reading state information... 0% Reading state information... 0%Reading state information... Done
149 packages can be upgraded. Run 'apt list --upgradable' to see them.
Reading package lists... 0%Reading package lists... 100%Reading package lists... Done
Building dependency tree... 0%Building dependency tree... 0%Building dependency tree... 50%Building dependency tree... 50%Building dependency tree... Done
Reading state information... 0% Reading state information... 0%Reading state information... Done
curl is already the newest version (8.5.0-2ubuntu10.6).
wget is already the newest version (1.21.4-1ubuntu4.1).
git is already the newest version (1:2.43.0-1ubuntu7.3).
ca-certificates is already the newest version (20240203).
0 upgraded, 0 newly installed, 0 to remove and 149 not upgraded.
[0;36mâžœ Installing Docker...[0m
[0;32mâœ” Docker is already installed.[0m
[0;36mâžœ Installing kubectl...[0m
[0;32mâœ” kubectl is already installed.[0m
[0;36mâžœ Installing k3d[0m
[0;32mâœ” k3d is already installed.[0m
[0;36mâžœ Cluster 'iot' already exists. Skipping creation.[0m
[0;36mâžœ Waiting for K3D nodes to be ready...[0m
node/k3d-iot-server-0 condition met
[0;32mâœ” K3D nodes are ready.[0m
[0;36mâžœ Installing Argo CD in 'argocd' namespace...[0m
Error from server (AlreadyExists): namespaces "argocd" already exists
customresourcedefinition.apiextensions.k8s.io/applications.argoproj.io unchanged
customresourcedefinition.apiextensions.k8s.io/applicationsets.argoproj.io unchanged
customresourcedefinition.apiextensions.k8s.io/appprojects.argoproj.io unchanged
serviceaccount/argocd-application-controller unchanged
serviceaccount/argocd-applicationset-controller unchanged
serviceaccount/argocd-dex-server unchanged
serviceaccount/argocd-notifications-controller unchanged
serviceaccount/argocd-redis unchanged
serviceaccount/argocd-repo-server unchanged
serviceaccount/argocd-server unchanged
role.rbac.authorization.k8s.io/argocd-application-controller unchanged
role.rbac.authorization.k8s.io/argocd-applicationset-controller unchanged
role.rbac.authorization.k8s.io/argocd-dex-server unchanged
role.rbac.authorization.k8s.io/argocd-notifications-controller unchanged
role.rbac.authorization.k8s.io/argocd-redis unchanged
role.rbac.authorization.k8s.io/argocd-server unchanged
clusterrole.rbac.authorization.k8s.io/argocd-application-controller unchanged
clusterrole.rbac.authorization.k8s.io/argocd-applicationset-controller unchanged
clusterrole.rbac.authorization.k8s.io/argocd-server unchanged
rolebinding.rbac.authorization.k8s.io/argocd-application-controller unchanged
rolebinding.rbac.authorization.k8s.io/argocd-applicationset-controller unchanged
rolebinding.rbac.authorization.k8s.io/argocd-dex-server unchanged
rolebinding.rbac.authorization.k8s.io/argocd-notifications-controller unchanged
rolebinding.rbac.authorization.k8s.io/argocd-redis unchanged
rolebinding.rbac.authorization.k8s.io/argocd-server unchanged
clusterrolebinding.rbac.authorization.k8s.io/argocd-application-controller unchanged
clusterrolebinding.rbac.authorization.k8s.io/argocd-applicationset-controller unchanged
clusterrolebinding.rbac.authorization.k8s.io/argocd-server unchanged
configmap/argocd-cm unchanged
configmap/argocd-cmd-params-cm unchanged
configmap/argocd-gpg-keys-cm unchanged
configmap/argocd-notifications-cm unchanged
configmap/argocd-rbac-cm unchanged
configmap/argocd-ssh-known-hosts-cm unchanged
configmap/argocd-tls-certs-cm unchanged
secret/argocd-notifications-secret unchanged
secret/argocd-secret unchanged
service/argocd-applicationset-controller unchanged
service/argocd-dex-server unchanged
service/argocd-metrics unchanged
service/argocd-notifications-controller-metrics unchanged
service/argocd-redis unchanged
service/argocd-repo-server unchanged
service/argocd-server unchanged
service/argocd-server-metrics unchanged
deployment.apps/argocd-applicationset-controller unchanged
deployment.apps/argocd-dex-server unchanged
deployment.apps/argocd-notifications-controller unchanged
deployment.apps/argocd-redis unchanged
deployment.apps/argocd-repo-server unchanged
deployment.apps/argocd-server unchanged
statefulset.apps/argocd-application-controller unchanged
networkpolicy.networking.k8s.io/argocd-application-controller-network-policy configured
networkpolicy.networking.k8s.io/argocd-applicationset-controller-network-policy unchanged
networkpolicy.networking.k8s.io/argocd-dex-server-network-policy unchanged
networkpolicy.networking.k8s.io/argocd-notifications-controller-network-policy unchanged
networkpolicy.networking.k8s.io/argocd-redis-network-policy unchanged
networkpolicy.networking.k8s.io/argocd-repo-server-network-policy configured
networkpolicy.networking.k8s.io/argocd-server-network-policy unchanged
[0;32mâœ” Argo CD deployed in 'argocd' namespace.[0m
[0;36mâžœ Waiting for Argo CD server to be available...[0m
deployment.apps/argocd-server condition met
[0;32mâœ” Argo CD is ready.[0m
[0;36mâžœ Starting port-forward on Argo CD UI (localhost:8080)...[0m
[0;36mâžœ Applying Argo CD Application manifest...[0m
application.argoproj.io/iot unchanged
[0;32mâœ” Application resource created. Argo CD should start syncing.[0m
[0;36mâžœ You can now access Argo CD UI at: http://localhost:8080...[0m
[1;33mDefault login: admin
Password: alhnZ0cq3WLQpYoS[0m
[0;36mâžœ Waiting for wil-playground Pod to be created by ArgoCD...[0m
[0;36mâžœ wil-playground Pod found. Waiting for it to become Ready...[0m
pod/wil-playground-74bff75c67-j2jrl condition met
[0;36mâžœ Starting port-forward to service 'wil-playground'...[0m
error: cannot attach to *v1.Service: invalid service 'wil-playground': Service is defined without a selector
[?2004h]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# kubectl get svc -n dev -o wide
[?2004lNAME             TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)    AGE     SELECTOR
wil-playground   ClusterIP   10.43.172.115   <none>        8888/TCP   8m33s   <none>
[?2004h]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# [K[A[K]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# [K[A[K]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# [K[A[K]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# [K[A[K]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# [K[A[K]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# [K[A[K]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# [K[A[K]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# [K[A[K]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# [K[A[K]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# [K[A[K]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# [K[A[K]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# [K[A[K]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts#
 [K[A[K]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# [K]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# kubectl get svc -n dev -o wide
[?2004lNAME             TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)    AGE     SELECTOR
wil-playground   ClusterIP   10.43.172.115   <none>        8888/TCP   9m32s   <none>
[?2004h]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# k3d cluster delete iot
[?2004l[36mINFO[0m[0000] Deleting cluster 'iot'                       
[36mINFO[0m[0007] Deleting cluster network 'k3d-iot'           
[36mINFO[0m[0007] Deleting 1 attached volumes...               
[36mINFO[0m[0007] Removing cluster details from default kubeconfig... 
[36mINFO[0m[0007] Removing standalone kubeconfig file (if there is one)... 
[36mINFO[0m[0007] Successfully deleted cluster iot!            
[?2004h]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# clear
[?2004l[H[2J[3J[?2004h]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# cleark3d cluster delete iotubectl get svc -n dev -o wide[17P./install.sh 
[?2004l[0;36mâžœ Installing required packages...[0m
[33m0% [Working][0m            Hit:1 https://download.docker.com/linux/ubuntu noble InRelease
[33m0% [Connecting to apt.releases.hashicorp.com] [Connecting to archive.ubuntu.com] [Connecting to security.ubuntu.com] [C[0m                                                                                                                       Hit:2 http://archive.ubuntu.com/ubuntu noble InRelease
[33m0% [Connected to apt.releases.hashicorp.com (99.86.91.124)] [Connecting to security.ubuntu.com (91.189.91.81)] [Waiting[0m                                                                                                                       Hit:3 https://packages.microsoft.com/repos/code stable InRelease
[33m                                                                                                                       0% [Waiting for headers] [Waiting for headers] [Connecting to security.ubuntu.com (91.189.91.81)][0m                                                                                                 Hit:4 https://apt.releases.hashicorp.com noble InRelease
[33m                                                                                                 0% [Waiting for headers] [Connecting to security.ubuntu.com (91.189.91.81)][0m                                                                           Get:5 http://archive.ubuntu.com/ubuntu noble-updates InRelease [126 kB]
[33m0% [5 InRelease 4,096 B/126 kB 3%] [Connecting to security.ubuntu.com (91.189.91.81)][0m[33m0% [5 InRelease 15.6 kB/126 kB 12%] [Connecting to security.ubuntu.com (91.189.91.81)][0m[33m                                                                                      0% [Connecting to security.ubuntu.com (91.189.91.81)][0m[33m0% [Waiting for headers] [Connecting to security.ubuntu.com (91.189.91.81)][0m                                                                           Hit:6 http://archive.ubuntu.com/ubuntu noble-backports InRelease
[33m                                                                           0% [Connecting to security.ubuntu.com (91.189.91.81)][0m[33m                                                     0% [Waiting for headers][0m[33m0% [Waiting for headers][0m[33m0% [Waiting for headers][0m                        Get:7 http://archive.ubuntu.com/ubuntu noble-updates/main amd64 Packages [1,269 kB]
[33m0% [7 Packages 15.7 kB/1,269 kB 1%] [Waiting for headers][0m                                                         Hit:8 http://security.ubuntu.com/ubuntu noble-security InRelease
[33m                                                         0% [7 Packages 107 kB/1,269 kB 8%][0m[33m0% [7 Packages 310 kB/1,269 kB 24%][0m[33m                                   0% [Working][0m[33m64% [Working][0m[33m64% [7 Packages store 0 B] [Waiting for headers][0m                                                Get:9 http://archive.ubuntu.com/ubuntu noble-updates/universe amd64 Packages [1,111 kB]
[33m66% [7 Packages store 0 B] [9 Packages 53.3 kB/1,111 kB 5%][0m[33m                                                           100% [7 Packages store 0 B][0m[33m                           100% [Working][0m[33m100% [9 Packages store 0 B][0m[33m                           100% [Working][0m              Fetched 2,506 kB in 1s (2,575 kB/s)
Reading package lists... 0%Reading package lists... 0%Reading package lists... 0%Reading package lists... 0%Reading package lists... 0%Reading package lists... 0%Reading package lists... 0%Reading package lists... 4%Reading package lists... 4%Reading package lists... 6%Reading package lists... 6%Reading package lists... 6%Reading package lists... 6%Reading package lists... 6%Reading package lists... 6%Reading package lists... 44%Reading package lists... 44%Reading package lists... 61%Reading package lists... 61%Reading package lists... 62%Reading package lists... 62%Reading package lists... 62%Reading package lists... 62%Reading package lists... 66%Reading package lists... 66%Reading package lists... 68%Reading package lists... 68%Reading package lists... 73%Reading package lists... 73%Reading package lists... 76%Reading package lists... 76%Reading package lists... 80%Reading package lists... 80%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 82%Reading package lists... 82%Reading package lists... 82%Reading package lists... 82%Reading package lists... 85%Reading package lists... 85%Reading package lists... 87%Reading package lists... 87%Reading package lists... 91%Reading package lists... 91%Reading package lists... 94%Reading package lists... 94%Reading package lists... 97%Reading package lists... 97%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 99%Reading package lists... 99%Reading package lists... Done
Building dependency tree... 0%Building dependency tree... 0%Building dependency tree... 0%Building dependency tree... 50%Building dependency tree... 50%Building dependency tree... Done
Reading state information... 0% Reading state information... 0%Reading state information... Done
149 packages can be upgraded. Run 'apt list --upgradable' to see them.
Reading package lists... 0%Reading package lists... 100%Reading package lists... Done
Building dependency tree... 0%Building dependency tree... 0%Building dependency tree... 50%Building dependency tree... 50%Building dependency tree... Done
Reading state information... 0% Reading state information... 0%Reading state information... Done
curl is already the newest version (8.5.0-2ubuntu10.6).
wget is already the newest version (1.21.4-1ubuntu4.1).
git is already the newest version (1:2.43.0-1ubuntu7.3).
ca-certificates is already the newest version (20240203).
0 upgraded, 0 newly installed, 0 to remove and 149 not upgraded.
[0;36mâžœ Installing Docker...[0m
[0;32mâœ” Docker is already installed.[0m
[0;36mâžœ Installing kubectl...[0m
[0;32mâœ” kubectl is already installed.[0m
[0;36mâžœ Installing k3d[0m
[0;32mâœ” k3d is already installed.[0m
[0;36mâžœ Creating K3D cluster 'iot'...[0m
[36mINFO[0m[0000] Prep: Network                                
[36mINFO[0m[0000] Created network 'k3d-iot'                    
[36mINFO[0m[0000] Created image volume k3d-iot-images          
[36mINFO[0m[0000] Starting new tools node...                   
[36mINFO[0m[0001] Creating node 'k3d-iot-server-0'             
[36mINFO[0m[0006] Starting node 'k3d-iot-tools'                
[36mINFO[0m[0008] Creating LoadBalancer 'k3d-iot-serverlb'     
[36mINFO[0m[0010] Using the k3d-tools node to gather environment information 
[36mINFO[0m[0011] HostIP: using network gateway 172.18.0.1 address 
[36mINFO[0m[0011] Starting cluster 'iot'                       
[36mINFO[0m[0011] Starting servers...                          
[36mINFO[0m[0012] Starting node 'k3d-iot-server-0'             
[36mINFO[0m[0021] All agents already running.                  
[36mINFO[0m[0021] Starting helpers...                          
[36mINFO[0m[0022] Starting node 'k3d-iot-serverlb'             
[36mINFO[0m[0032] Injecting records for hostAliases (incl. host.k3d.internal) and for 2 network members into CoreDNS configmap... 
[36mINFO[0m[0034] Cluster 'iot' created successfully!          
[36mINFO[0m[0034] You can now use it like this:                
kubectl cluster-info
[0;32mâœ” Cluster 'iot' created.[0m
[0;36mâžœ Waiting for K3D nodes to be ready...[0m
node/k3d-iot-server-0 condition met
[0;32mâœ” K3D nodes are ready.[0m
[0;36mâžœ Installing Argo CD in 'argocd' namespace...[0m
namespace/argocd created
namespace/dev created
customresourcedefinition.apiextensions.k8s.io/applications.argoproj.io created
customresourcedefinition.apiextensions.k8s.io/applicationsets.argoproj.io created
customresourcedefinition.apiextensions.k8s.io/appprojects.argoproj.io created
serviceaccount/argocd-application-controller created
serviceaccount/argocd-applicationset-controller created
serviceaccount/argocd-dex-server created
serviceaccount/argocd-notifications-controller created
serviceaccount/argocd-redis created
serviceaccount/argocd-repo-server created
serviceaccount/argocd-server created
role.rbac.authorization.k8s.io/argocd-application-controller created
role.rbac.authorization.k8s.io/argocd-applicationset-controller created
role.rbac.authorization.k8s.io/argocd-dex-server created
role.rbac.authorization.k8s.io/argocd-notifications-controller created
role.rbac.authorization.k8s.io/argocd-redis created
role.rbac.authorization.k8s.io/argocd-server created
clusterrole.rbac.authorization.k8s.io/argocd-application-controller created
clusterrole.rbac.authorization.k8s.io/argocd-applicationset-controller created
clusterrole.rbac.authorization.k8s.io/argocd-server created
rolebinding.rbac.authorization.k8s.io/argocd-application-controller created
rolebinding.rbac.authorization.k8s.io/argocd-applicationset-controller created
rolebinding.rbac.authorization.k8s.io/argocd-dex-server created
rolebinding.rbac.authorization.k8s.io/argocd-notifications-controller created
rolebinding.rbac.authorization.k8s.io/argocd-redis created
rolebinding.rbac.authorization.k8s.io/argocd-server created
clusterrolebinding.rbac.authorization.k8s.io/argocd-application-controller created
clusterrolebinding.rbac.authorization.k8s.io/argocd-applicationset-controller created
clusterrolebinding.rbac.authorization.k8s.io/argocd-server created
configmap/argocd-cm created
configmap/argocd-cmd-params-cm created
configmap/argocd-gpg-keys-cm created
configmap/argocd-notifications-cm created
configmap/argocd-rbac-cm created
configmap/argocd-ssh-known-hosts-cm created
configmap/argocd-tls-certs-cm created
secret/argocd-notifications-secret created
secret/argocd-secret created
service/argocd-applicationset-controller created
service/argocd-dex-server created
service/argocd-metrics created
service/argocd-notifications-controller-metrics created
service/argocd-redis created
service/argocd-repo-server created
service/argocd-server created
service/argocd-server-metrics created
deployment.apps/argocd-applicationset-controller created
deployment.apps/argocd-dex-server created
deployment.apps/argocd-notifications-controller created
deployment.apps/argocd-redis created
deployment.apps/argocd-repo-server created
deployment.apps/argocd-server created
statefulset.apps/argocd-application-controller created
networkpolicy.networking.k8s.io/argocd-application-controller-network-policy created
networkpolicy.networking.k8s.io/argocd-applicationset-controller-network-policy created
networkpolicy.networking.k8s.io/argocd-dex-server-network-policy created
networkpolicy.networking.k8s.io/argocd-notifications-controller-network-policy created
networkpolicy.networking.k8s.io/argocd-redis-network-policy created
networkpolicy.networking.k8s.io/argocd-repo-server-network-policy created
networkpolicy.networking.k8s.io/argocd-server-network-policy created
[0;32mâœ” Argo CD deployed in 'argocd' namespace.[0m
[0;36mâžœ Waiting for Argo CD server to be available...[0m
deployment.apps/argocd-server condition met
[0;32mâœ” Argo CD is ready.[0m
[0;36mâžœ Starting port-forward on Argo CD UI (localhost:8080)...[0m
[0;36mâžœ Applying Argo CD Application manifest...[0m
application.argoproj.io/iot created
[0;32mâœ” Application resource created. Argo CD should start syncing.[0m
[0;36mâžœ You can now access Argo CD UI at: http://localhost:8080...[0m
[1;33mDefault login: admin
Password: T5yAke6AjYGLZTbc[0m
[0;36mâžœ Waiting for wil-playground Pod to be created by ArgoCD...[0m
[1;33mâžœ Pod not found yet. Waiting... (0/24)[0m
[0;36mâžœ wil-playground Pod found. Waiting for it to become Ready...[0m
pod/wil-playground-74bff75c67-68dzw condition met
[0;36mâžœ Starting port-forward to service 'wil-playground'...[0m
error: cannot attach to *v1.Service: invalid service 'wil-playground': Service is defined without a selector
[?2004h]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# #!/bin/bash

set -e

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# Couleurs
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
CYAN='\033[0;36m'
NC='\033[0m'

function info {
        echo -e "${CYAN}âžœ $1${NC}"
}

function success {
        echo -e "${GREEN}âœ” $1${NC}"
}

# Dependencies
info "Installing required packages..."
sudo apt update -y
sudo apt install -y curl wget git ca-certificates

# Docker
info "Installing Docker..."
if ! command -v docker &>/dev/null; then
        curl -fssL https://get.docker.com | sh
        success "Docker installed successfully."
else
        success "Docker is already installed."fi# kubectlinfo "Installing kubectl..."if ! command -v kubectl &>/dev/null; then        curl -LO "https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl"        chmod +x kubectl        sudo mv kubectl /usr/local/bin        success "kubectl installed."else        success "kubectl is already installed."fi# k3dinfo "Installing k3d"if ! command -v k3d &>/dev/null; then        wget -q -O - https://raw.githubusercontent.com/k3d-io/k3d/main/install.sh | bash        success "K3D installed."else        success "k3d is already installed."fi# Create k3d clusterCLUSTER_NAME="iot"if k3d cluster list | grep -q $CLUSTER_NAME; then        info "Cluster '$CLUSTER_NAME' already exists. Skipping creation."else        info "Creating K3D cluster '$CLUSTER_NAME'..."        k3d cluster create $CLUSTER_NAME        success "Cluster '$CLUSTER_NAME' created."fi# Wait for nodesinfo "Waiting for K3D nodes to be ready..."kubectl wait node --all --for=condition=Ready --timeout=60s || error_exit "Nodes did not become ready."success "K3D nodes are ready."# Install Argo CDinfo "Installing Argo CD in 'argocd' namespace..."kubectl create namespace argocd && kubectl create namespace devkubectl apply -n argocd -f https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yamlsuccess "Argo CD deployed in 'argocd' namespace."# Wait for Argo CD to be readyinfo "Waiting for Argo CD server to be available..."kubectl wait --for=condition=available --timeout=180s -n argocd deploy/argocd-server || error_exit "Argo CD server is not ready in time."success "Argo CD is ready."info "Starting port-forward on Argo CD UI (localhost:8080)..."kubectl port-forward svc/argocd-server -n argocd 8080:443 >/dev/null 2>&1 &sleep 2info "Applying Argo CD Application manifest..."kubectl apply -f "$SCRIPT_DIR/../confs/argocd.yaml" -n argocdsuccess "Application resource created. Argo CD should start syncing."[7m# Credentials[27m[7minfo "You can now access Argo CD UI at: http://localhost:8080..."[27m[7mecho -e "${YELLOW}Default login: admin"[27m[7mecho -e "Password: $(kubectl -n argocd get secret argocd-initial-admin-secret -o jsonpath='{.data.password}' | base64 -d[27m[7m)${NC}"[27m[7minfo "Waiting for wil-playground Pod to be created by ArgoCD..."[27m[7mATTEMPTS=0[27m[7muntil kubectl get pod -l app=wil-playground -n dev 2>/dev/null | grep -q wil-playground || [ $ATTEMPTS -ge 24 ]; do[27m[7mecho -e "${YELLOW}âžœ Pod not found yet. Waiting... (${ATTEMPTS}/24)${NC}"[27m[7mATTEMPTS=$((ATTEMPTS + 1))[27m[7msleep 5[27m[7mdone[27m[7mif [ $ATTEMPTS -ge 24 ]; then[27m[7mecho -e "${RED}âœ˜ Timeout: Pod was not created after 2 minutes.${NC}"[27m[7mkubectl get pods -n dev[27m[7mexit 1[27m[7mfi[27m[7minfo "wil-playground Pod found. Waiting for it to become Ready..."[27m[7mkubectl wait --for=condition=ready pod -l app=wil-playground -n dev --timeout=120s || {[27m[7mecho -e "${RED}âœ˜ Timeout: wil-playground Pod is not Ready.${NC}"[27m[7mkubectl get pods -n dev[27m[7mexit 1[27m[7m}[27m[7m#port-forward [27m[7minfo "Starting port-forward to service 'wil-playground'..."[27m[7mkubectl port-forward svc/wil-playground -n dev 8888:8888[27m[7minfo "Setup complete!"[27m^C[?2004l[?2004h[?2004l
[?2004h]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# #!/bin/bash

set -e

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# Couleurs
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
CYAN='\033[0;36m'
NC='\033[0m'

function info {
        echo -e "${CYAN}âžœ $1${NC}"
}

function success {
        echo -e "${GREEN}âœ” $1${NC}"
}

# Dependencies
info "Installing required packages..."
sudo apt update -y
sudo apt install -y curl wget git ca-certificates

# Docker
info "Installing Docker..."
if ! command -v docker &>/dev/null; then
        curl -fssL https://get.docker.com | sh
        success "Docker installed successfully."
else
        success "Docker is already installed."fi# kubectlinfo "Installing kubectl..."if ! command -v kubectl &>/dev/null; then        curl -LO "https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl"        chmod +x kubectl        sudo mv kubectl /usr/local/bin        success "kubectl installed."else        success "kubectl is already installed."fi# k3dinfo "Installing k3d"if ! command -v k3d &>/dev/null; then        wget -q -O - https://raw.githubusercontent.com/k3d-io/k3d/main/install.sh | bash        success "K3D installed."else        success "k3d is already installed."fi# Create k3d clusterCLUSTER_NAME="iot"if k3d cluster list | grep -q $CLUSTER_NAME; then        info "Cluster '$CLUSTER_NAME' already exists. Skipping creation."else        info "Creating K3D cluster '$CLUSTER_NAME'..."        k3d cluster create $CLUSTER_NAME        success "Cluster '$CLUSTER_NAME' created."fi# Wait for nodesinfo "Waiting for K3D nodes to be ready..."kubectl wait node --all --for=condition=Ready --timeout=60s || error_exit "Nodes did not become ready."success "K3D nodes are ready."# Install Argo CDinfo "Installing Argo CD in 'argocd' namespace..."kubectl create namespace argocd && kubectl create namespace devkubectl apply -n argocd -f https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yamlsuccess "Argo CD deployed in 'argocd' namespace."# Wait for Argo CD to be readyinfo "Waiting for Argo CD server to be available..."kubectl wait --for=condition=available --timeout=180s -n argocd deploy/argocd-server || error_exit "Argo CD server is not ready in time."success "Argo CD is ready."info "Starting port-forward on Argo CD UI (localhost:8080)..."kubectl port-forward svc/argocd-server -n argocd 8080:443 >/dev/null 2>&1 &sleep 2info "Applying Argo CD Application manifest..."kubectl apply -f "$SCRIPT_DIR/../confs/argocd.yaml" -n argocdsuccess "Application resource created. Argo CD should start syncing."[7m# Credentials[27m[7minfo "You can now access Argo CD UI at: http://localhost:8080..."[27m[7mecho -e "${YELLOW}Default login: admin"[27m[7mecho -e "Password: $(kubectl -n argocd get secret argocd-initial-admin-secret -o jsonpath='{.data.password}' | base64 -d[27m[7m)${NC}"[27m[7minfo "Waiting for wil-playground Pod to be created by ArgoCD..."[27m[7mATTEMPTS=0[27m[7muntil kubectl get pod -l app=wil-playground -n dev 2>/dev/null | grep -q wil-playground || [ $ATTEMPTS -ge 24 ]; do[27m[7mecho -e "${YELLOW}âžœ Pod not found yet. Waiting... (${ATTEMPTS}/24)${NC}"[27m[7mATTEMPTS=$((ATTEMPTS + 1))[27m[7msleep 5[27m[7mdone[27m[7mif [ $ATTEMPTS -ge 24 ]; then[27m[7mecho -e "${RED}âœ˜ Timeout: Pod was not created after 2 minutes.${NC}"[27m[7mkubectl get pods -n dev[27m[7mexit 1[27m[7mfi[27m[7minfo "wil-playground Pod found. Waiting for it to become Ready..."[27m[7mkubectl wait --for=condition=ready pod -l app=wil-playground -n dev --timeout=120s || {[27m[7mecho -e "${RED}âœ˜ Timeout: wil-playground Pod is not Ready.${NC}"[27m[7mkubectl get pods -n dev[27m[7mexit 1[27m[7m}[27m[7m#port-forward [27m[7minfo "Starting port-forward to service 'wil-playground'..."[27m[7mkubectl port-forward svc/wil-playground -n dev 8888:8888[27m[7minfo "Setup complete!"[27m# Credentialsinfo "You can now access Argo CD UI at: http://localhost:8080..."echo -e "${YELLOW}Default login: admin"echo -e "Password: $(kubectl -n argocd get secret argocd-initial-admin-secret -o jsonpath='{.data.password}' | base64 -d)${NC}"info "Waiting for wil-playground Pod to be created by ArgoCD..."ATTEMPTS=0until kubectl get pod -l app=wil-playground -n dev 2>/dev/null | grep -q wil-playground || [ $ATTEMPTS -ge 24 ]; doecho -e "${YELLOW}âžœ Pod not found yet. Waiting... (${ATTEMPTS}/24)${NC}"ATTEMPTS=$((ATTEMPTS + 1))sleep 5doneif [ $ATTEMPTS -ge 24 ]; thenecho -e "${RED}âœ˜ Timeout: Pod was not created after 2 minutes.${NC}"kubectl get pods -n devexit 1fiinfo "wil-playground Pod found. Waiting for it to become Ready..."kubectl wait --for=condition=ready pod -l app=wil-playground -n dev --timeout=120s || {echo -e "${RED}âœ˜ Timeout: wil-playground Pod is not Ready.${NC}"kubectl get pods -n devexit 1}#port-forward info "Starting port-forward to service 'wil-playground'..."kubectl port-forward svc/wil-playground -n dev 8888:8888info "Setup complete!"
[?2004l[0;36mâžœ Installing required packages...[0m
[33m0% [Working][0m            Hit:1 https://download.docker.com/linux/ubuntu noble InRelease
[33m0% [Connecting to apt.releases.hashicorp.com] [Connecting to archive.ubuntu.com (91.189.91.81)] [Connecting to security[0m                                                                                                                       Hit:2 https://apt.releases.hashicorp.com noble InRelease
[33m0% [Connecting to archive.ubuntu.com (91.189.91.81)] [Connecting to security.ubuntu.com (91.189.91.81)] [Connected to p[0m[33m0% [Connecting to archive.ubuntu.com (91.189.91.81)] [Connecting to security.ubuntu.com (91.189.91.81)] [Waiting for he[0m                                                                                                                       Hit:3 https://packages.microsoft.com/repos/code stable InRelease
[33m                                                                                                                       0% [Connecting to archive.ubuntu.com (91.189.91.81)] [Connecting to security.ubuntu.com (91.189.91.81)][0m[33m0% [Connecting to archive.ubuntu.com (91.189.91.81)] [Connecting to security.ubuntu.com (91.189.91.81)][0m[33m                                                                                                       0% [Waiting for headers] [Waiting for headers][0m                                              Hit:4 http://security.ubuntu.com/ubuntu noble-security InRelease
[33m                                              0% [Waiting for headers][0m                        Hit:5 http://archive.ubuntu.com/ubuntu noble InRelease
[33m                        0% [Working][0m[33m0% [Waiting for headers][0m[33m0% [Waiting for headers][0m                        Hit:6 http://archive.ubuntu.com/ubuntu noble-updates InRelease
[33m                        0% [Working][0m[33m0% [Waiting for headers][0m                        Hit:7 http://archive.ubuntu.com/ubuntu noble-backports InRelease
[33m                        0% [Working][0m[33m20% [Working][0m             Reading package lists... 0%Reading package lists... 0%Reading package lists... 0%Reading package lists... 0%Reading package lists... 0%Reading package lists... 0%Reading package lists... 0%Reading package lists... 4%Reading package lists... 4%Reading package lists... 6%Reading package lists... 6%Reading package lists... 6%Reading package lists... 6%Reading package lists... 6%Reading package lists... 6%Reading package lists... 44%Reading package lists... 44%Reading package lists... 61%Reading package lists... 61%Reading package lists... 62%Reading package lists... 62%Reading package lists... 62%Reading package lists... 62%Reading package lists... 66%Reading package lists... 66%Reading package lists... 68%Reading package lists... 68%Reading package lists... 73%Reading package lists... 73%Reading package lists... 76%Reading package lists... 76%Reading package lists... 80%Reading package lists... 80%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 82%Reading package lists... 82%Reading package lists... 82%Reading package lists... 82%Reading package lists... 85%Reading package lists... 85%Reading package lists... 87%Reading package lists... 87%Reading package lists... 91%Reading package lists... 91%Reading package lists... 94%Reading package lists... 94%Reading package lists... 97%Reading package lists... 97%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 99%Reading package lists... 99%Reading package lists... Done
Building dependency tree... 0%Building dependency tree... 0%Building dependency tree... 0%Building dependency tree... 50%Building dependency tree... 50%Building dependency tree... Done
Reading state information... 0% Reading state information... 0%Reading state information... Done
149 packages can be upgraded. Run 'apt list --upgradable' to see them.
Reading package lists... 0%Reading package lists... 100%Reading package lists... Done
Building dependency tree... 0%Building dependency tree... 0%Building dependency tree... 50%Building dependency tree... 50%Building dependency tree... Done
Reading state information... 0% Reading state information... 0%Reading state information... Done
curl is already the newest version (8.5.0-2ubuntu10.6).
wget is already the newest version (1.21.4-1ubuntu4.1).
git is already the newest version (1:2.43.0-1ubuntu7.3).
ca-certificates is already the newest version (20240203).
0 upgraded, 0 newly installed, 0 to remove and 149 not upgraded.
[0;36mâžœ Installing Docker...[0m
[0;32mâœ” Docker is already installed.[0m
[0;36mâžœ Installing kubectl...[0m
[0;32mâœ” kubectl is already installed.[0m
[0;36mâžœ Installing k3d[0m
[0;32mâœ” k3d is already installed.[0m
[0;36mâžœ Cluster 'iot' already exists. Skipping creation.[0m
[0;36mâžœ Waiting for K3D nodes to be ready...[0m
node/k3d-iot-server-0 condition met
[0;32mâœ” K3D nodes are ready.[0m
[0;36mâžœ Installing Argo CD in 'argocd' namespace...[0m
Error from server (AlreadyExists): namespaces "argocd" already exists
customresourcedefinition.apiextensions.k8s.io/applications.argoproj.io unchanged
customresourcedefinition.apiextensions.k8s.io/applicationsets.argoproj.io unchanged
customresourcedefinition.apiextensions.k8s.io/appprojects.argoproj.io unchanged
serviceaccount/argocd-application-controller unchanged
serviceaccount/argocd-applicationset-controller unchanged
serviceaccount/argocd-dex-server unchanged
serviceaccount/argocd-notifications-controller unchanged
serviceaccount/argocd-redis unchanged
serviceaccount/argocd-repo-server unchanged
serviceaccount/argocd-server unchanged
role.rbac.authorization.k8s.io/argocd-application-controller unchanged
role.rbac.authorization.k8s.io/argocd-applicationset-controller unchanged
role.rbac.authorization.k8s.io/argocd-dex-server unchanged
role.rbac.authorization.k8s.io/argocd-notifications-controller unchanged
role.rbac.authorization.k8s.io/argocd-redis unchanged
role.rbac.authorization.k8s.io/argocd-server unchanged
clusterrole.rbac.authorization.k8s.io/argocd-application-controller unchanged
clusterrole.rbac.authorization.k8s.io/argocd-applicationset-controller unchanged
clusterrole.rbac.authorization.k8s.io/argocd-server unchanged
rolebinding.rbac.authorization.k8s.io/argocd-application-controller unchanged
rolebinding.rbac.authorization.k8s.io/argocd-applicationset-controller unchanged
rolebinding.rbac.authorization.k8s.io/argocd-dex-server unchanged
rolebinding.rbac.authorization.k8s.io/argocd-notifications-controller unchanged
rolebinding.rbac.authorization.k8s.io/argocd-redis unchanged
rolebinding.rbac.authorization.k8s.io/argocd-server unchanged
clusterrolebinding.rbac.authorization.k8s.io/argocd-application-controller unchanged
clusterrolebinding.rbac.authorization.k8s.io/argocd-applicationset-controller unchanged
clusterrolebinding.rbac.authorization.k8s.io/argocd-server unchanged
configmap/argocd-cm unchanged
configmap/argocd-cmd-params-cm unchanged
configmap/argocd-gpg-keys-cm unchanged
configmap/argocd-notifications-cm unchanged
configmap/argocd-rbac-cm unchanged
configmap/argocd-ssh-known-hosts-cm unchanged
configmap/argocd-tls-certs-cm unchanged
secret/argocd-notifications-secret unchanged
secret/argocd-secret unchanged
service/argocd-applicationset-controller unchanged
service/argocd-dex-server unchanged
service/argocd-metrics unchanged
service/argocd-notifications-controller-metrics unchanged
service/argocd-redis unchanged
service/argocd-repo-server unchanged
service/argocd-server unchanged
service/argocd-server-metrics unchanged
deployment.apps/argocd-applicationset-controller unchanged
deployment.apps/argocd-dex-server unchanged
deployment.apps/argocd-notifications-controller unchanged
deployment.apps/argocd-redis unchanged
deployment.apps/argocd-repo-server unchanged
deployment.apps/argocd-server unchanged
statefulset.apps/argocd-application-controller unchanged
networkpolicy.networking.k8s.io/argocd-application-controller-network-policy configured
networkpolicy.networking.k8s.io/argocd-applicationset-controller-network-policy unchanged
networkpolicy.networking.k8s.io/argocd-dex-server-network-policy unchanged
networkpolicy.networking.k8s.io/argocd-notifications-controller-network-policy unchanged
networkpolicy.networking.k8s.io/argocd-redis-network-policy unchanged
networkpolicy.networking.k8s.io/argocd-repo-server-network-policy configured
networkpolicy.networking.k8s.io/argocd-server-network-policy unchanged
[0;32mâœ” Argo CD deployed in 'argocd' namespace.[0m
[0;36mâžœ Waiting for Argo CD server to be available...[0m
deployment.apps/argocd-server condition met
[0;32mâœ” Argo CD is ready.[0m
[0;36mâžœ Starting port-forward on Argo CD UI (localhost:8080)...[0m
[1] 23628
[1]+  Exit 1                  kubectl port-forward svc/argocd-server -n argocd 8080:443 > /dev/null 2>&1
[0;36mâžœ Applying Argo CD Application manifest...[0m
application.argoproj.io/iot unchanged
[0;32mâœ” Application resource created. Argo CD should start syncing.[0m
[0;36mâžœ You can now access Argo CD UI at: http://localhost:8080...[0m
[1;33mDefault login: admin
Password: T5yAke6AjYGLZTbc[0m
[0;36mâžœ Waiting for wil-playground Pod to be created by ArgoCD...[0m
[0;36mâžœ wil-playground Pod found. Waiting for it to become Ready...[0m
pod/wil-playground-74bff75c67-68dzw condition met
[0;36mâžœ Starting port-forward to service 'wil-playground'...[0m
error: cannot attach to *v1.Service: invalid service 'wil-playground': Service is defined without a selector
[?2004h]0;opdi-bia@opdi-bia-VirtualBox: ~/inception_of_things/p3/scripts[01;32mopdi-bia@opdi-bia-VirtualBox[00m:[01;34m~/inception_of_things/p3/scripts[00m$ kubectl get svc wil-playground -n dev -o yaml
[?2004lE0718 11:26:00.655037   23725 memcache.go:265] "Unhandled Error" err="couldn't get current server API group list: Get \"https://localhost:8080/api?timeout=32s\": tls: failed to verify certificate: x509: certificate signed by unknown authority"
E0718 11:26:00.662118   23725 memcache.go:265] "Unhandled Error" err="couldn't get current server API group list: Get \"https://localhost:8080/api?timeout=32s\": tls: failed to verify certificate: x509: certificate signed by unknown authority"
E0718 11:26:00.666369   23725 memcache.go:265] "Unhandled Error" err="couldn't get current server API group list: Get \"https://localhost:8080/api?timeout=32s\": tls: failed to verify certificate: x509: certificate signed by unknown authority"
E0718 11:26:00.670795   23725 memcache.go:265] "Unhandled Error" err="couldn't get current server API group list: Get \"https://localhost:8080/api?timeout=32s\": tls: failed to verify certificate: x509: certificate signed by unknown authority"
E0718 11:26:00.675708   23725 memcache.go:265] "Unhandled Error" err="couldn't get current server API group list: Get \"https://localhost:8080/api?timeout=32s\": tls: failed to verify certificate: x509: certificate signed by unknown authority"
Unable to connect to the server: tls: failed to verify certificate: x509: certificate signed by unknown authority
[?2004h]0;opdi-bia@opdi-bia-VirtualBox: ~/inception_of_things/p3/scripts[01;32mopdi-bia@opdi-bia-VirtualBox[00m:[01;34m~/inception_of_things/p3/scripts[00m$ agrocd app get iot
[?2004lagrocd: command not found
[?2004h]0;opdi-bia@opdi-bia-VirtualBox: ~/inception_of_things/p3/scripts[01;32mopdi-bia@opdi-bia-VirtualBox[00m:[01;34m~/inception_of_things/p3/scripts[00m$ agrocd app get iot[1P[1P[1@r[C[1@o[1P[1@g
[?2004largocd: command not found
[?2004h]0;opdi-bia@opdi-bia-VirtualBox: ~/inception_of_things/p3/scripts[01;32mopdi-bia@opdi-bia-VirtualBox[00m:[01;34m~/inception_of_things/p3/scripts[00m$ [K]0;opdi-bia@opdi-bia-VirtualBox: ~/inception_of_things/p3/scripts[01;32mopdi-bia@opdi-bia-VirtualBox[00m:[01;34m~/inception_of_things/p3/scripts[00m$ [K]0;opdi-bia@opdi-bia-VirtualBox: ~/inception_of_things/p3/scripts[01;32mopdi-bia@opdi-bia-VirtualBox[00m:[01;34m~/inception_of_things/p3/scripts[00m$ [K]0;opdi-bia@opdi-bia-VirtualBox: ~/inception_of_things/p3/scripts[01;32mopdi-bia@opdi-bia-VirtualBox[00m:[01;34m~/inception_of_things/p3/scripts[00m$ argocd app get iot[A]0;opdi-bia@opdi-bia-VirtualBox: ~/inception_of_things/p3/scripts[01;32mopdi-bia@opdi-bia-VirtualBox[00m:[01;34m~/inception_of_things/p3/scripts[00m$ [Cgr
[C[C[C[C[C[C[C[C[A]0;opdi-bia@opdi-bia-VirtualBox: ~/inception_of_things/p3/scripts[01;32mopdi-bia@opdi-bia-VirtualBox[00m:[01;34m~/inception_of_things/p3/scripts[00m$ kubectl get svc wil-playground -n dev -o yaml[A]0;opdi-bia@opdi-bia-VirtualBox: ~/inception_of_things/p3/scripts[01;32mopdi-bia@opdi-bia-VirtualBox[00m:[01;34m~/inception_of_things/p3/scripts[00m$ [3Psudo su
[K[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Kcd scripts/[A]0;opdi-bia@opdi-bia-VirtualBox: ~/inception_of_things/p3/scripts[01;32mopdi-bia@opdi-bia-VirtualBox[00m:[01;34m~/inception_of_things/p3/scripts[00m$ su[K
[K[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Ccd p3ode .[1Pd .../install.sh [A]0;opdi-bia@opdi-bia-VirtualBox: ~/inception_of_things/p3/scripts[01;32mopdi-bia@opdi-bia-VirtualBox[00m:[01;34m~/inception_of_things/p3/scripts[00m$ chmod +x in[7@stall.s[C[C[A]0;opdi-bia@opdi-bia-VirtualBox: ~/inception_of_things/p3/scripts[01;32mopdi-bia@opdi-bia-VirtualBox[00m:[01;34m~/inception_of_things/p3/scripts[00m$ ./install.sh [K[A]0;opdi-bia@opdi-bia-VirtualBox: ~/inception_of_things/p3/scripts[01;32mopdi-bia@opdi-bia-VirtualBox[00m:[01;34m~/inception_of_things/p3/scripts[00m$ [5Pcd ..
[K[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Code .[1Pd p3[3Psucd scripts/[A]0;opdi-bia@opdi-bia-VirtualBox: ~/inception_of_things/p3/scripts[01;32mopdi-bia@opdi-bia-VirtualBox[00m:[01;34m~/inception_of_things/p3/scripts[00m$ su[K
[K[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cdo sukubectl get svc wil-playground -n dev -o yaml[A]0;opdi-bia@opdi-bia-VirtualBox: ~/inception_of_things/p3/scripts[01;32mopdi-bia@opdi-bia-VirtualBox[00m:[01;34m~/inception_of_things/p3/scripts[00m$ agrocd app get iot[K[A]0;opdi-bia@opdi-bia-VirtualBox: ~/inception_of_things/p3/scripts[01;32mopdi-bia@opdi-bia-VirtualBox[00m:[01;34m~/inception_of_things/p3/scripts[00m$ kubectl get svc wil-playground -n dev -o yaml[A]0;opdi-bia@opdi-bia-VirtualBox: ~/inception_of_things/p3/scripts[01;32mopdi-bia@opdi-bia-VirtualBox[00m:[01;34m~/inception_of_things/p3/scripts[00m$ agrocd app get iot[K[A]0;opdi-bia@opdi-bia-VirtualBox: ~/inception_of_things/p3/scripts[01;32mopdi-bia@opdi-bia-VirtualBox[00m:[01;34m~/inception_of_things/p3/scripts[00m$ [Crg
[C[C[C[C[C[C[C[C[A]0;opdi-bia@opdi-bia-VirtualBox: ~/inception_of_things/p3/scripts[01;32mopdi-bia@opdi-bia-VirtualBox[00m:[01;34m~/inception_of_things/p3/scripts[00m$ [K
[K[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Ck3d cluste r delete iot
[?2004l[31mERRO[0m[0000] Failed to get nodes for cluster 'iot': docker failed to get containers with labels 'map[k3d.cluster:iot]': failed to list containers: permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Get "http://%2Fvar%2Frun%2Fdocker.sock/v1.46/containers/json?all=1&filters=%7B%22label%22%3A%7B%22app%3Dk3d%22%3Atrue%2C%22k3d.cluster%3Diot%22%3Atrue%7D%7D": dial unix /var/run/docker.sock: connect: permission denied 
[36mINFO[0m[0000] No nodes found for cluster 'iot', nothing to delete. 
[36mINFO[0m[0000] No clusters found                            
[?2004h]0;opdi-bia@opdi-bia-VirtualBox: ~/inception_of_things/p3/scripts[01;32mopdi-bia@opdi-bia-VirtualBox[00m:[01;34m~/inception_of_things/p3/scripts[00m$ k3d cluster delete iot[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Csk3d cluste[1@r[A]0;opdi-bia@opdi-bia-VirtualBox: ~/inception_of_things/p3/scripts[01;32mopdi-bia@opdi-bia-VirtualBox[00m:[01;34m~/inception_of_things/p3/scripts[00m$ [Cuk3d clust[1@e[A]0;opdi-bia@opdi-bia-VirtualBox: ~/inception_of_things/p3/scripts[01;32mopdi-bia@opdi-bia-VirtualBox[00m:[01;34m~/inception_of_things/p3/scripts[00m$ [C[Cdk3d clus[1@t[A]0;opdi-bia@opdi-bia-VirtualBox: ~/inception_of_things/p3/scripts[01;32mopdi-bia@opdi-bia-VirtualBox[00m:[01;34m~/inception_of_things/p3/scripts[00m$ [C[C[Cok3d clu[1@s[A]0;opdi-bia@opdi-bia-VirtualBox: ~/inception_of_things/p3/scripts[01;32mopdi-bia@opdi-bia-VirtualBox[00m:[01;34m~/inception_of_things/p3/scripts[00m$ [C[C[C[C k3d cl[1@u[A]0;opdi-bia@opdi-bia-VirtualBox: ~/inception_of_things/p3/scripts[01;32mopdi-bia@opdi-bia-VirtualBox[00m:[01;34m~/inception_of_things/p3/scripts[00m$ [C[C[C[C[C

[?2004l[sudo] password for opdi-bia: 
[36mINFO[0m[0000] Deleting cluster 'iot'                       
[36mINFO[0m[0003] Deleting cluster network 'k3d-iot'           
[36mINFO[0m[0004] Deleting 1 attached volumes...               
[36mINFO[0m[0004] Removing cluster details from default kubeconfig... 
[36mINFO[0m[0004] Removing standalone kubeconfig file (if there is one)... 
[36mINFO[0m[0004] Successfully deleted cluster iot!            
[?2004h]0;opdi-bia@opdi-bia-VirtualBox: ~/inception_of_things/p3/scripts[01;32mopdi-bia@opdi-bia-VirtualBox[00m:[01;34m~/inception_of_things/p3/scripts[00m$ clear
[?2004l[H[2J[3J[?2004h]0;opdi-bia@opdi-bia-VirtualBox: ~/inception_of_things/p3/scripts[01;32mopdi-bia@opdi-bia-VirtualBox[00m:[01;34m~/inception_of_things/p3/scripts[00m$ sudo su
[?2004l[?2004h]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# t est
[?2004l[?2004h]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# c lear
[?2004l[H[2J[3J[?2004h]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# . /install.sh 
[?2004l[0;36mâžœ Installing required packages...[0m
[33m0% [Working][0m            Hit:1 https://apt.releases.hashicorp.com noble InRelease
[33m0% [Connected to download.docker.com (52.222.149.7)] [Connecting to arch[0m                                                                        Hit:2 https://download.docker.com/linux/ubuntu noble InRelease
                                                                        Hit:3 https://packages.microsoft.com/repos/code stable InRelease
[33m0% [Connecting to archive.ubuntu.com] [Connecting to security.ubuntu.com[0m[33m0% [Connecting to archive.ubuntu.com] [Connecting to security.ubuntu.com[0m[33m0% [Connecting to archive.ubuntu.com (91.189.91.83)] [Connecting to secu[0m[33m0% [Connecting to archive.ubuntu.com (91.189.91.83)] [Connecting to secu[0m                                                                        Hit:4 http://security.ubuntu.com/ubuntu noble-security InRelease
[33m                                                                        0% [Waiting for headers][0m                        Hit:5 http://archive.ubuntu.com/ubuntu noble InRelease
[33m0% [Waiting for headers][0m[33m0% [Waiting for headers][0m[33m0% [Waiting for headers][0m                        Hit:6 http://archive.ubuntu.com/ubuntu noble-updates InRelease
[33m0% [Waiting for headers][0m[33m0% [Waiting for headers][0m                        Hit:7 http://archive.ubuntu.com/ubuntu noble-backports InRelease
[33m                        0% [Working][0m[33m20% [Working][0m             Reading package lists... 0%Reading package lists... 0%Reading package lists... 0%Reading package lists... 0%Reading package lists... 0%Reading package lists... 0%Reading package lists... 0%Reading package lists... 4%Reading package lists... 4%Reading package lists... 6%Reading package lists... 6%Reading package lists... 6%Reading package lists... 6%Reading package lists... 6%Reading package lists... 6%Reading package lists... 44%Reading package lists... 44%Reading package lists... 61%Reading package lists... 61%Reading package lists... 62%Reading package lists... 62%Reading package lists... 62%Reading package lists... 62%Reading package lists... 66%Reading package lists... 66%Reading package lists... 68%Reading package lists... 68%Reading package lists... 73%Reading package lists... 73%Reading package lists... 76%Reading package lists... 76%Reading package lists... 80%Reading package lists... 80%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 82%Reading package lists... 82%Reading package lists... 82%Reading package lists... 82%Reading package lists... 85%Reading package lists... 85%Reading package lists... 87%Reading package lists... 87%Reading package lists... 91%Reading package lists... 91%Reading package lists... 94%Reading package lists... 94%Reading package lists... 97%Reading package lists... 97%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 99%Reading package lists... 99%Reading package lists... Done
Building dependency tree... 0%Building dependency tree... 0%Building dependency tree... 0%Building dependency tree... 50%Building dependency tree... 50%Building dependency tree... Done
Reading state information... 0% Reading state information... 0%Reading state information... Done
149 packages can be upgraded. Run 'apt list --upgradable' to see them.
Reading package lists... 0%Reading package lists... 100%Reading package lists... Done
Building dependency tree... 0%Building dependency tree... 0%Building dependency tree... 50%Building dependency tree... 50%Building dependency tree... Done
Reading state information... 0% Reading state information... 0%Reading state information... Done
curl is already the newest version (8.5.0-2ubuntu10.6).
wget is already the newest version (1.21.4-1ubuntu4.1).
git is already the newest version (1:2.43.0-1ubuntu7.3).
ca-certificates is already the newest version (20240203).
0 upgraded, 0 newly installed, 0 to remove and 149 not upgraded.
[0;36mâžœ Installing Docker...[0m
[0;32mâœ” Docker is already installed.[0m
[0;36mâžœ Installing kubectl...[0m
[0;32mâœ” kubectl is already installed.[0m
[0;36mâžœ Installing k3d[0m
[0;32mâœ” k3d is already installed.[0m
[0;36mâžœ Creating K3D cluster 'iot'...[0m
[36mINFO[0m[0000] Prep: Network                                
[36mINFO[0m[0000] Created network 'k3d-iot'                    
[36mINFO[0m[0000] Created image volume k3d-iot-images          
[36mINFO[0m[0000] Starting new tools node...                   
[36mINFO[0m[0001] Creating node 'k3d-iot-server-0'             
[36mINFO[0m[0002] Starting node 'k3d-iot-tools'                
[36mINFO[0m[0002] Creating LoadBalancer 'k3d-iot-serverlb'     
[36mINFO[0m[0003] Using the k3d-tools node to gather environment information 
[36mINFO[0m[0004] HostIP: using network gateway 172.18.0.1 address 
[36mINFO[0m[0004] Starting cluster 'iot'                       
[36mINFO[0m[0004] Starting servers...                          
[36mINFO[0m[0004] Starting node 'k3d-iot-server-0'             
[36mINFO[0m[0007] All agents already running.                  
[36mINFO[0m[0007] Starting helpers...                          
[36mINFO[0m[0007] Starting node 'k3d-iot-serverlb'             
[36mINFO[0m[0015] Injecting records for hostAliases (incl. host.k3d.internal) and for 2 network members into CoreDNS configmap... 
[36mINFO[0m[0017] Cluster 'iot' created successfully!          
[36mINFO[0m[0017] You can now use it like this:                
kubectl cluster-info
[0;32mâœ” Cluster 'iot' created.[0m
[0;36mâžœ Waiting for K3D nodes to be ready...[0m
node/k3d-iot-server-0 condition met
[0;32mâœ” K3D nodes are ready.[0m
[0;36mâžœ Installing Argo CD in 'argocd' namespace...[0m
namespace/argocd created
namespace/dev created
customresourcedefinition.apiextensions.k8s.io/applications.argoproj.io created
customresourcedefinition.apiextensions.k8s.io/applicationsets.argoproj.io created
customresourcedefinition.apiextensions.k8s.io/appprojects.argoproj.io created
serviceaccount/argocd-application-controller created
serviceaccount/argocd-applicationset-controller created
serviceaccount/argocd-dex-server created
serviceaccount/argocd-notifications-controller created
serviceaccount/argocd-redis created
serviceaccount/argocd-repo-server created
serviceaccount/argocd-server created
role.rbac.authorization.k8s.io/argocd-application-controller created
role.rbac.authorization.k8s.io/argocd-applicationset-controller created
role.rbac.authorization.k8s.io/argocd-dex-server created
role.rbac.authorization.k8s.io/argocd-notifications-controller created
role.rbac.authorization.k8s.io/argocd-redis created
role.rbac.authorization.k8s.io/argocd-server created
clusterrole.rbac.authorization.k8s.io/argocd-application-controller created
clusterrole.rbac.authorization.k8s.io/argocd-applicationset-controller created
clusterrole.rbac.authorization.k8s.io/argocd-server created
rolebinding.rbac.authorization.k8s.io/argocd-application-controller created
rolebinding.rbac.authorization.k8s.io/argocd-applicationset-controller created
rolebinding.rbac.authorization.k8s.io/argocd-dex-server created
rolebinding.rbac.authorization.k8s.io/argocd-notifications-controller created
rolebinding.rbac.authorization.k8s.io/argocd-redis created
rolebinding.rbac.authorization.k8s.io/argocd-server created
clusterrolebinding.rbac.authorization.k8s.io/argocd-application-controller created
clusterrolebinding.rbac.authorization.k8s.io/argocd-applicationset-controller created
clusterrolebinding.rbac.authorization.k8s.io/argocd-server created
configmap/argocd-cm created
configmap/argocd-cmd-params-cm created
configmap/argocd-gpg-keys-cm created
configmap/argocd-notifications-cm created
configmap/argocd-rbac-cm created
configmap/argocd-ssh-known-hosts-cm created
configmap/argocd-tls-certs-cm created
secret/argocd-notifications-secret created
secret/argocd-secret created
service/argocd-applicationset-controller created
service/argocd-dex-server created
service/argocd-metrics created
service/argocd-notifications-controller-metrics created
service/argocd-redis created
service/argocd-repo-server created
service/argocd-server created
service/argocd-server-metrics created
deployment.apps/argocd-applicationset-controller created
deployment.apps/argocd-dex-server created
deployment.apps/argocd-notifications-controller created
deployment.apps/argocd-redis created
deployment.apps/argocd-repo-server created
deployment.apps/argocd-server created
statefulset.apps/argocd-application-controller created
networkpolicy.networking.k8s.io/argocd-application-controller-network-policy created
networkpolicy.networking.k8s.io/argocd-applicationset-controller-network-policy created
networkpolicy.networking.k8s.io/argocd-dex-server-network-policy created
networkpolicy.networking.k8s.io/argocd-notifications-controller-network-policy created
networkpolicy.networking.k8s.io/argocd-redis-network-policy created
networkpolicy.networking.k8s.io/argocd-repo-server-network-policy created
networkpolicy.networking.k8s.io/argocd-server-network-policy created
[0;32mâœ” Argo CD deployed in 'argocd' namespace.[0m
[0;36mâžœ Waiting for Argo CD server to be available...[0m
deployment.apps/argocd-server condition met
[0;32mâœ” Argo CD is ready.[0m
[0;36mâžœ Starting port-forward on Argo CD UI (localhost:8080)...[0m
[0;36mâžœ Applying Argo CD Application manifest...[0m
application.argoproj.io/iot created
[0;32mâœ” Application resource created. Argo CD should start syncing.[0m
[0;36mâžœ You can now access Argo CD UI at: http://localhost:8080...[0m
[1;33mDefault login: admin
Password: 0CQdY1LLNFwFDdyq[0m
[0;36mâžœ Waiting for wil-playground Pod to be created by ArgoCD...[0m
[1;33mâžœ Pod not found yet. Waiting... (0/24)[0m
[1;33mâžœ Pod not found yet. Waiting... (1/24)[0m
[1;33mâžœ Pod not found yet. Waiting... (2/24)[0m
^C
[?2004h]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# ./install.sh [A]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# clear[K[A]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# te[1Pst[A]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# kubectl port-forward svc/wil-playground -n dev 8888:8888[A]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# info "Starting port-forward to service 'wil-playground'..."[A]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# #port-forward [K[A]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# kubectl wait --for=condition=ready pod -l app=wil-playground -n dev --timeout=120s || { echo -e "${RED}âœ˜ Timeout: wil-playground Pod is not Ready.${NC}"; kubectl get pods -n dev; exit 1; }[A[A[A]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# in[8Pfo "wil-playground Pod found. Waiting for it to become Ready..."
[K
[K[A[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cf [ $ATTEMPTS -ge 24 ]; then echo -e "${RED}âœ˜ Timeout: Pod was not created after 2 minutes.${NC}"; kubectl get pods -n dev; exit 1; fi[A[A]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# until kubectl get pod -l app=wil-playground -n dev 2>/dev/null | grep -q wil-playground || [ $ATTEMPTS -ge 24 ]; do echo -e "${YELLOW}âžœ Pod not found yet. Waiting... (${ATTEMPTS}/24)${NC}"; ATTEMPTS=$((ATTEMPTS + 1)); sleep 5; done[A[A[A[A]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# ATTEMPTS=0[K
[K
[K
[K[A[A[A[C[C[C[C[C[C[C[C[C[A]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# info "Waiting for wil-playground Pod to be created by ArgoCD..."[A]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# echo -e "Password: $(kubectl -n argocd get secret argocd-initial-admin-secret -o jsonpath='{.data.password}' | base64 -d)${NC}"[A[C[C[C[C[C[C[C[C[35P${YELLOW}Default login: admin"
[K[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[A]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# info "You can now access Argo CD UI at: http://localhost:8080..."[A]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# # Credentials[K[A]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# success "Application resource created. Argo CD should start syncing."[A]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# ku[8Pbectl apply -f "$SCRIPT_DIR/../confs/argocd.yaml" -n argocd[A]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# in[14Pfo "Applying Argo CD Application manifest..."^C[?2004l[?2004h[?2004l
[?2004h]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# k 3d cluster delete iot
[?2004l[36mINFO[0m[0000] Deleting cluster 'iot'                       
[36mINFO[0m[0004] Deleting cluster network 'k3d-iot'           
[36mINFO[0m[0005] Deleting 1 attached volumes...               
[36mINFO[0m[0005] Removing cluster details from default kubeconfig... 
[36mINFO[0m[0005] Removing standalone kubeconfig file (if there is one)... 
[36mINFO[0m[0005] Successfully deleted cluster iot!            
[?2004h]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# k3d cluster delete iot[A]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# ./[9Pinstall.sh 
[?2004l[0;36mâžœ Installing required packages...[0m
[33m0% [Working][0m            Hit:1 https://apt.releases.hashicorp.com noble InRelease
[33m0% [Connected to download.docker.com (52.222.149.7)] [Connecting to arch[0m                                                                        Hit:2 https://packages.microsoft.com/repos/code stable InRelease
[33m0% [Waiting for headers] [Connecting to archive.ubuntu.com (91.189.91.82[0m                                                                        Hit:3 https://download.docker.com/linux/ubuntu noble InRelease
[33m0% [Connecting to archive.ubuntu.com (91.189.91.82)] [Waiting for header[0m                                                                        Hit:4 http://security.ubuntu.com/ubuntu noble-security InRelease
[33m                                                                        0% [Connecting to archive.ubuntu.com (91.189.91.82)][0m[33m0% [Connecting to archive.ubuntu.com (91.189.91.82)][0m[33m0% [Connecting to archive.ubuntu.com (91.189.91.82)][0m[33m                                                    0% [Waiting for headers][0m[33m0% [Waiting for headers][0m                        Hit:5 http://archive.ubuntu.com/ubuntu noble InRelease
[33m                        0% [Working][0m[33m0% [Waiting for headers][0m                        Hit:6 http://archive.ubuntu.com/ubuntu noble-updates InRelease
[33m                        0% [Working][0m[33m0% [Waiting for headers][0m                        Hit:7 http://archive.ubuntu.com/ubuntu noble-backports InRelease
[33m                        0% [Working][0m[33m20% [Working][0m             Reading package lists... 0%Reading package lists... 0%Reading package lists... 0%Reading package lists... 0%Reading package lists... 0%Reading package lists... 0%Reading package lists... 0%Reading package lists... 4%Reading package lists... 4%Reading package lists... 6%Reading package lists... 6%Reading package lists... 6%Reading package lists... 6%Reading package lists... 6%Reading package lists... 6%Reading package lists... 44%Reading package lists... 44%Reading package lists... 61%Reading package lists... 61%Reading package lists... 62%Reading package lists... 62%Reading package lists... 62%Reading package lists... 62%Reading package lists... 66%Reading package lists... 66%Reading package lists... 68%Reading package lists... 68%Reading package lists... 73%Reading package lists... 73%Reading package lists... 76%Reading package lists... 76%Reading package lists... 80%Reading package lists... 80%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 81%Reading package lists... 82%Reading package lists... 82%Reading package lists... 82%Reading package lists... 82%Reading package lists... 85%Reading package lists... 85%Reading package lists... 87%Reading package lists... 87%Reading package lists... 91%Reading package lists... 91%Reading package lists... 94%Reading package lists... 94%Reading package lists... 97%Reading package lists... 97%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 98%Reading package lists... 99%Reading package lists... 99%Reading package lists... Done
Building dependency tree... 0%Building dependency tree... 0%Building dependency tree... 0%Building dependency tree... 50%Building dependency tree... 50%Building dependency tree... Done
Reading state information... 0% Reading state information... 0%Reading state information... Done
149 packages can be upgraded. Run 'apt list --upgradable' to see them.
Reading package lists... 0%Reading package lists... 100%Reading package lists... Done
Building dependency tree... 0%Building dependency tree... 0%Building dependency tree... 50%Building dependency tree... 50%Building dependency tree... Done
Reading state information... 0% Reading state information... 0%Reading state information... Done
curl is already the newest version (8.5.0-2ubuntu10.6).
wget is already the newest version (1.21.4-1ubuntu4.1).
git is already the newest version (1:2.43.0-1ubuntu7.3).
ca-certificates is already the newest version (20240203).
0 upgraded, 0 newly installed, 0 to remove and 149 not upgraded.
[0;36mâžœ Installing Docker...[0m
[0;32mâœ” Docker is already installed.[0m
[0;36mâžœ Installing kubectl...[0m
[0;32mâœ” kubectl is already installed.[0m
[0;36mâžœ Installing k3d[0m
[0;32mâœ” k3d is already installed.[0m
[0;36mâžœ Creating K3D cluster 'iot'...[0m
[36mINFO[0m[0000] Prep: Network                                
[36mINFO[0m[0000] Created network 'k3d-iot'                    
[36mINFO[0m[0000] Created image volume k3d-iot-images          
[36mINFO[0m[0000] Starting new tools node...                   
[36mINFO[0m[0001] Creating node 'k3d-iot-server-0'             
[36mINFO[0m[0002] Starting node 'k3d-iot-tools'                
[36mINFO[0m[0002] Creating LoadBalancer 'k3d-iot-serverlb'     
[36mINFO[0m[0002] Using the k3d-tools node to gather environment information 
[36mINFO[0m[0003] HostIP: using network gateway 172.18.0.1 address 
[36mINFO[0m[0003] Starting cluster 'iot'                       
[36mINFO[0m[0003] Starting servers...                          
[36mINFO[0m[0003] Starting node 'k3d-iot-server-0'             
[36mINFO[0m[0006] All agents already running.                  
[36mINFO[0m[0006] Starting helpers...                          
[36mINFO[0m[0006] Starting node 'k3d-iot-serverlb'             
[36mINFO[0m[0012] Injecting records for hostAliases (incl. host.k3d.internal) and for 2 network members into CoreDNS configmap... 
[36mINFO[0m[0014] Cluster 'iot' created successfully!          
[36mINFO[0m[0014] You can now use it like this:                
kubectl cluster-info
[0;32mâœ” Cluster 'iot' created.[0m
[0;36mâžœ Waiting for K3D nodes to be ready...[0m
node/k3d-iot-server-0 condition met
[0;32mâœ” K3D nodes are ready.[0m
[0;36mâžœ Installing Argo CD in 'argocd' namespace...[0m
namespace/argocd created
namespace/dev created
customresourcedefinition.apiextensions.k8s.io/applications.argoproj.io created
customresourcedefinition.apiextensions.k8s.io/applicationsets.argoproj.io created
customresourcedefinition.apiextensions.k8s.io/appprojects.argoproj.io created
serviceaccount/argocd-application-controller created
serviceaccount/argocd-applicationset-controller created
serviceaccount/argocd-dex-server created
serviceaccount/argocd-notifications-controller created
serviceaccount/argocd-redis created
serviceaccount/argocd-repo-server created
serviceaccount/argocd-server created
role.rbac.authorization.k8s.io/argocd-application-controller created
role.rbac.authorization.k8s.io/argocd-applicationset-controller created
role.rbac.authorization.k8s.io/argocd-dex-server created
role.rbac.authorization.k8s.io/argocd-notifications-controller created
role.rbac.authorization.k8s.io/argocd-redis created
role.rbac.authorization.k8s.io/argocd-server created
clusterrole.rbac.authorization.k8s.io/argocd-application-controller created
clusterrole.rbac.authorization.k8s.io/argocd-applicationset-controller created
clusterrole.rbac.authorization.k8s.io/argocd-server created
rolebinding.rbac.authorization.k8s.io/argocd-application-controller created
rolebinding.rbac.authorization.k8s.io/argocd-applicationset-controller created
rolebinding.rbac.authorization.k8s.io/argocd-dex-server created
rolebinding.rbac.authorization.k8s.io/argocd-notifications-controller created
rolebinding.rbac.authorization.k8s.io/argocd-redis created
rolebinding.rbac.authorization.k8s.io/argocd-server created
clusterrolebinding.rbac.authorization.k8s.io/argocd-application-controller created
clusterrolebinding.rbac.authorization.k8s.io/argocd-applicationset-controller created
clusterrolebinding.rbac.authorization.k8s.io/argocd-server created
configmap/argocd-cm created
configmap/argocd-cmd-params-cm created
configmap/argocd-gpg-keys-cm created
configmap/argocd-notifications-cm created
configmap/argocd-rbac-cm created
configmap/argocd-ssh-known-hosts-cm created
configmap/argocd-tls-certs-cm created
secret/argocd-notifications-secret created
secret/argocd-secret created
service/argocd-applicationset-controller created
service/argocd-dex-server created
service/argocd-metrics created
service/argocd-notifications-controller-metrics created
service/argocd-redis created
service/argocd-repo-server created
service/argocd-server created
service/argocd-server-metrics created
deployment.apps/argocd-applicationset-controller created
deployment.apps/argocd-dex-server created
deployment.apps/argocd-notifications-controller created
deployment.apps/argocd-redis created
deployment.apps/argocd-repo-server created
deployment.apps/argocd-server created
statefulset.apps/argocd-application-controller created
networkpolicy.networking.k8s.io/argocd-application-controller-network-policy created
networkpolicy.networking.k8s.io/argocd-applicationset-controller-network-policy created
networkpolicy.networking.k8s.io/argocd-dex-server-network-policy created
networkpolicy.networking.k8s.io/argocd-notifications-controller-network-policy created
networkpolicy.networking.k8s.io/argocd-redis-network-policy created
networkpolicy.networking.k8s.io/argocd-repo-server-network-policy created
networkpolicy.networking.k8s.io/argocd-server-network-policy created
[0;32mâœ” Argo CD deployed in 'argocd' namespace.[0m
[0;36mâžœ Waiting for Argo CD server to be available...[0m
deployment.apps/argocd-server condition met
[0;32mâœ” Argo CD is ready.[0m
[0;36mâžœ Starting port-forward on Argo CD UI (localhost:8080)...[0m
[0;36mâžœ Applying Argo CD Application manifest...[0m
application.argoproj.io/iot created
[0;32mâœ” Application resource created. Argo CD should start syncing.[0m
[0;36mâžœ You can now access Argo CD UI at: http://localhost:8080...[0m
[1;33mDefault login: admin
Password: c2YKfh6ozu8eHap2[0m
[0;36mâžœ Waiting for wil-playground Pod to be created by ArgoCD...[0m
[1;33mâžœ Pod not found yet. Waiting... (0/24)[0m
[0;36mâžœ wil-playground Pod found. Waiting for it to become Ready...[0m
pod/wil-playground-74bff75c67-crtzp condition met
[0;36mâžœ Starting port-forward to service 'wil-playground'...[0m
Forwarding from 127.0.0.1:8888 -> 8888
Forwarding from [::1]:8888 -> 8888
^C[0;36mâžœ Setup complete![0m
[?2004h]0;root@opdi-bia-VirtualBox: /home/opdi-bia/inception_of_things/p3/scriptsroot@opdi-bia-VirtualBox:/home/opdi-bia/inception_of_things/p3/scripts# [?2004l
exit
[?2004h]0;opdi-bia@opdi-bia-VirtualBox: ~/inception_of_things/p3/scripts[01;32mopdi-bia@opdi-bia-VirtualBox[00m:[01;34m~/